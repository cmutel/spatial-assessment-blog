New feature: LCA calculations are now saved
###########################################

:date: 2013-01-29 12:00
:category: brightway2
:slug: serialized-lca-reports
:summary: LCA calculations in Brightway2 are now saved, opening many new possibilities.

Changesets `e706dc3 <https://bitbucket.org/cmutel/brightway2-analyzer/commits/e706dc3b7c1c75ba744d5c860ed300b9>`_ and `cf0db1e <https://bitbucket.org/cmutel/brightway2-ui/commits/cf0db1e1db0a94ce1fc4b5bfca8d0708>`_ introduce a new way to make LCA calculations in Brightway2. Previously, a user pressed the **calculate** button, and an LCA calculation was made and formatted into a web page. There is nothing wrong with this, but we can do better. 

Separating presentation and content
===================================

One key concept in both the planning of Brightway2 and computer science in general is the *separation of concerns*. Calculating LCA results is a very different thing from formatting these results into appealing text and graphics. Now, when an LCA calculation is requested, an LCA report is generated by a separate module in `Brightway2-analyzer <https://bitbucket.org/cmutel/brightway2-analyzer>`_, and the raw data is saved to a `JSON <http://en.wikipedia.org/wiki/JSON>`_ file on the hard drive. When using the web interface, the user is redirected to a new URL, and the LCA report is generated from saved data.

This separation of presentation (the display of the result tables and graphs) from the content (the underlying data) is a very good thing for a number of reasons.

#. It allows LCA results to computed asynchronously, meaning that other operations can be performed while an LCA is in progress, that LCA calculations can be queued, and that LCA calculations can be thought of as a web service instead of part of a specific web UI.
#. It allows LCA results to be displayed in different ways. Anyone can write their own LCA report page. The results format is in a language-agnostic format, and is simple and well-defined.
#. It makes writing tests for correct behaviour easier, ensuring that results are more correct over time.
#. It makes it easier for people to contribute, because the results calculator and display code are independent of each other.
#. It allows results to be uploaded to a separate virtual of physical location for later display.

This later reason might seem simple, and it isn't especially complex, but it is a big step towards making Brightway2 a platform for LCA calculations.

A preview of coming functionality
=================================

Coming soon to Brightway2: report uploads! There will be a separate Python program (which won't have any dependencies on Brightway2) which will accept uploaded report data, and generate web reports from uploaded data. I also plan to open http://reports.brightwaylca.org (this isn't live yet, so the link doesn't work) for people to upload reports if they so desire.

How to upgrade
==============

Open a terminal window (command shell in Windows), and type the following:

.. code-block:: bash

    pip install --upgrade --no-deps bw2calc bw2analyzer bw2ui